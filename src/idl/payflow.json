{
  "address": "2yUwGR18L5a8UqfkX49M4SenYCrS4B48chioKWCnMG3y",
  "metadata": {
    "name": "payflow",
    "version": "0.1.0",
    "spec": "0.1.0",
    "description": "PayFlow - Yield Discounting Protocol for Solana"
  },
  "instructions": [
    {
      "name": "buy_deal",
      "docs": [
        "Buy a deal",
        "Transfers payment to seller, activates the deal"
      ],
      "discriminator": [
        238,
        240,
        163,
        186,
        237,
        55,
        172,
        73
      ],
      "accounts": [
        {
          "name": "buyer",
          "writable": true,
          "signer": true
        },
        {
          "name": "config",
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "deal",
          "writable": true
        },
        {
          "name": "buyer_payment_account",
          "docs": [
            "Token account de l'acheteur (USDC)"
          ],
          "writable": true
        },
        {
          "name": "seller_payment_account",
          "docs": [
            "Token account du vendeur (reçoit le paiement)"
          ],
          "writable": true
        },
        {
          "name": "treasury_account",
          "docs": [
            "Treasury (reçoit les fees)"
          ],
          "writable": true
        },
        {
          "name": "token_program",
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        }
      ],
      "args": []
    },
    {
      "name": "buy_meteora_lp_deal",
      "docs": [
        "Buy a Meteora LP fee deal",
        "Buyer pays seller and gains rights to claim fees during the deal period"
      ],
      "discriminator": [
        94,
        186,
        141,
        79,
        1,
        136,
        151,
        241
      ],
      "accounts": [
        {
          "name": "buyer",
          "writable": true,
          "signer": true
        },
        {
          "name": "config",
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "deal",
          "writable": true
        },
        {
          "name": "buyer_payment_account",
          "docs": [
            "Buyer's payment token account (USDC)"
          ],
          "writable": true
        },
        {
          "name": "seller_payment_account",
          "docs": [
            "Seller's payment token account (receives payment)"
          ],
          "writable": true
        },
        {
          "name": "treasury_account",
          "docs": [
            "Treasury (receives protocol fees)"
          ],
          "writable": true
        },
        {
          "name": "token_program",
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        }
      ],
      "args": []
    },
    {
      "name": "buyback_deal",
      "docs": [
        "Buyback a deal before it ends (early exit)",
        "Seller pays back buyer with penalty"
      ],
      "discriminator": [
        233,
        113,
        218,
        213,
        163,
        75,
        226,
        0
      ],
      "accounts": [
        {
          "name": "seller",
          "writable": true,
          "signer": true
        },
        {
          "name": "config",
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "deal",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  121,
                  105,
                  101,
                  108,
                  100,
                  95,
                  100,
                  101,
                  97,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "deal.deal_id",
                "account": "YieldDeal"
              }
            ]
          }
        },
        {
          "name": "vault",
          "docs": [
            "Vault contenant les receipt tokens"
          ],
          "writable": true
        },
        {
          "name": "seller_payment_account",
          "docs": [
            "Token account du vendeur pour payer le buyback (USDC)"
          ],
          "writable": true
        },
        {
          "name": "seller_receipt_account",
          "docs": [
            "Token account du vendeur pour récupérer ses receipt tokens"
          ],
          "writable": true
        },
        {
          "name": "buyer_payment_account",
          "docs": [
            "Token account de l'acheteur (reçoit le remboursement)"
          ],
          "writable": true
        },
        {
          "name": "token_program",
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        }
      ],
      "args": [
        {
          "name": "yield_accumulated",
          "type": "u64"
        }
      ]
    },
    {
      "name": "cancel_deal",
      "docs": [
        "Cancel a deal that hasn't been purchased yet",
        "Returns the locked tokens to the seller"
      ],
      "discriminator": [
        158,
        86,
        193,
        45,
        168,
        111,
        48,
        29
      ],
      "accounts": [
        {
          "name": "seller",
          "writable": true,
          "signer": true
        },
        {
          "name": "deal",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  121,
                  105,
                  101,
                  108,
                  100,
                  95,
                  100,
                  101,
                  97,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "deal.deal_id",
                "account": "YieldDeal"
              }
            ]
          }
        },
        {
          "name": "vault",
          "docs": [
            "Vault contenant les receipt tokens"
          ],
          "writable": true
        },
        {
          "name": "seller_token_account",
          "docs": [
            "Token account du vendeur (récupère ses tokens)"
          ],
          "writable": true
        },
        {
          "name": "token_program",
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        }
      ],
      "args": []
    },
    {
      "name": "cancel_meteora_lp_deal",
      "docs": [
        "Cancel a Meteora LP deal before it's purchased",
        "Seller can retrieve their Position NFT"
      ],
      "discriminator": [
        231,
        205,
        1,
        32,
        38,
        51,
        147,
        110
      ],
      "accounts": [
        {
          "name": "seller",
          "docs": [
            "Only the seller can cancel"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "deal",
          "writable": true
        },
        {
          "name": "nft_vault",
          "docs": [
            "The vault holding the Position NFT"
          ],
          "writable": true
        },
        {
          "name": "seller_nft_account",
          "docs": [
            "Seller's token account to receive the NFT back"
          ],
          "writable": true
        },
        {
          "name": "position_nft_mint",
          "docs": [
            "Position NFT mint (needed for transfer_checked)"
          ]
        },
        {
          "name": "nft_token_program"
        }
      ],
      "args": []
    },
    {
      "name": "claim_meteora_fees",
      "docs": [
        "Claim accumulated Meteora fees",
        "Buyer can call this anytime during the deal to claim fees"
      ],
      "discriminator": [
        21,
        207,
        178,
        64,
        130,
        211,
        31,
        100
      ],
      "accounts": [
        {
          "name": "buyer",
          "docs": [
            "The buyer who owns the fee rights during the deal"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "deal",
          "writable": true
        },
        {
          "name": "nft_vault",
          "docs": [
            "The vault holding the Position NFT (deal is the authority)"
          ]
        },
        {
          "name": "buyer_token_a_account",
          "docs": [
            "Buyer's token account to receive Token A fees"
          ],
          "writable": true
        },
        {
          "name": "buyer_token_b_account",
          "docs": [
            "Buyer's token account to receive Token B fees"
          ],
          "writable": true
        },
        {
          "name": "meteora_program",
          "docs": [
            "Meteora DAMM v2 Program"
          ]
        },
        {
          "name": "meteora_position",
          "docs": [
            "Meteora Position account"
          ],
          "writable": true
        },
        {
          "name": "meteora_pool",
          "docs": [
            "Meteora Pool account"
          ],
          "writable": true
        },
        {
          "name": "pool_token_a_vault",
          "docs": [
            "Pool's Token A vault"
          ],
          "writable": true
        },
        {
          "name": "pool_token_b_vault",
          "docs": [
            "Pool's Token B vault"
          ],
          "writable": true
        },
        {
          "name": "token_a_mint",
          "docs": [
            "Token A mint"
          ]
        },
        {
          "name": "token_b_mint",
          "docs": [
            "Token B mint"
          ]
        },
        {
          "name": "token_program",
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        }
      ],
      "args": []
    },
    {
      "name": "crank_settle",
      "docs": [
        "Crank-style settlement for expired deals",
        "Anyone can call this to settle deals and receive rent as incentive"
      ],
      "discriminator": [
        103,
        68,
        217,
        130,
        163,
        137,
        13,
        99
      ],
      "accounts": [
        {
          "name": "cranker",
          "docs": [
            "The cranker/keeper who triggers the settlement",
            "Receives rent from closed vault account"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "deal",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  121,
                  105,
                  101,
                  108,
                  100,
                  95,
                  100,
                  101,
                  97,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "deal.deal_id",
                "account": "YieldDeal"
              }
            ]
          }
        },
        {
          "name": "vault",
          "docs": [
            "Vault containing the locked receipt tokens"
          ],
          "writable": true
        },
        {
          "name": "buyer_token_account",
          "docs": [
            "Buyer's token account (receives yield in receipt tokens)"
          ],
          "writable": true
        },
        {
          "name": "seller_token_account",
          "docs": [
            "Seller's token account (receives principal)"
          ],
          "writable": true
        },
        {
          "name": "token_program",
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        }
      ],
      "args": [
        {
          "name": "current_token_value",
          "type": "u64"
        }
      ]
    },
    {
      "name": "create_deal",
      "docs": [
        "Create a new yield deal",
        "Locks receipt tokens (kUSDC, mSOL, etc.) in a vault PDA"
      ],
      "discriminator": [
        198,
        212,
        144,
        151,
        97,
        56,
        149,
        113
      ],
      "accounts": [
        {
          "name": "seller",
          "writable": true,
          "signer": true
        },
        {
          "name": "config",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "deal",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  121,
                  105,
                  101,
                  108,
                  100,
                  95,
                  100,
                  101,
                  97,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "config.deal_counter",
                "account": "ProtocolConfig"
              }
            ]
          }
        },
        {
          "name": "seller_token_account",
          "docs": [
            "Le token account du vendeur (contient kUSDC, mSOL, etc.)"
          ],
          "writable": true
        },
        {
          "name": "vault",
          "docs": [
            "Vault PDA pour stocker les tokens lockés"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "deal"
              }
            ]
          }
        },
        {
          "name": "receipt_token_mint",
          "docs": [
            "Mint du receipt token"
          ]
        },
        {
          "name": "payment_mint",
          "docs": [
            "Mint du token de paiement (USDC)"
          ]
        },
        {
          "name": "token_program",
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        },
        {
          "name": "rent",
          "address": "SysvarRent111111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "params",
          "type": {
            "defined": {
              "name": "CreateDealParams"
            }
          }
        }
      ]
    },
    {
      "name": "create_meteora_lp_deal",
      "docs": [
        "Create a new Meteora LP fee deal",
        "Locks a Position NFT in PayFlow vault to sell future fees"
      ],
      "discriminator": [
        200,
        60,
        129,
        175,
        155,
        62,
        24,
        62
      ],
      "accounts": [
        {
          "name": "seller",
          "writable": true,
          "signer": true
        },
        {
          "name": "config",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "deal",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  109,
                  101,
                  116,
                  101,
                  111,
                  114,
                  97,
                  95,
                  108,
                  112,
                  95,
                  100,
                  101,
                  97,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "config.deal_counter",
                "account": "ProtocolConfig"
              }
            ]
          }
        },
        {
          "name": "seller_nft_account",
          "docs": [
            "The seller's token account holding the Position NFT"
          ],
          "writable": true
        },
        {
          "name": "nft_vault",
          "docs": [
            "Vault PDA to hold the Position NFT"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  109,
                  101,
                  116,
                  101,
                  111,
                  114,
                  97,
                  95,
                  110,
                  102,
                  116,
                  95,
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "deal"
              }
            ]
          }
        },
        {
          "name": "position_nft_mint",
          "docs": [
            "The Position NFT mint (1 NFT = 1 LP position)"
          ]
        },
        {
          "name": "token_a_mint",
          "docs": [
            "Token A mint from the pool"
          ]
        },
        {
          "name": "token_b_mint",
          "docs": [
            "Token B mint from the pool"
          ]
        },
        {
          "name": "payment_mint",
          "docs": [
            "Payment token mint (usually USDC)"
          ]
        },
        {
          "name": "nft_token_program",
          "docs": [
            "Token program for NFT (Token or Token2022)"
          ]
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        },
        {
          "name": "rent",
          "address": "SysvarRent111111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "params",
          "type": {
            "defined": {
              "name": "CreateMeteoraLpDealParams"
            }
          }
        }
      ]
    },
    {
      "name": "initialize",
      "docs": [
        "Initialize the PayFlow protocol",
        "Sets up the global configuration with default parameters"
      ],
      "discriminator": [
        175,
        175,
        109,
        31,
        13,
        152,
        155,
        237
      ],
      "accounts": [
        {
          "name": "authority",
          "writable": true,
          "signer": true
        },
        {
          "name": "config",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "treasury"
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": []
    },
    {
      "name": "settle_deal",
      "docs": [
        "Settle a deal after it has ended",
        "Distributes yield to buyer and principal to seller"
      ],
      "discriminator": [
        28,
        10,
        168,
        174,
        203,
        149,
        134,
        54
      ],
      "accounts": [
        {
          "name": "payer",
          "docs": [
            "N'importe qui peut trigger le settlement (permissionless)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "deal",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  121,
                  105,
                  101,
                  108,
                  100,
                  95,
                  100,
                  101,
                  97,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "deal.deal_id",
                "account": "YieldDeal"
              }
            ]
          }
        },
        {
          "name": "vault",
          "docs": [
            "Vault contenant les receipt tokens"
          ],
          "writable": true
        },
        {
          "name": "buyer_token_account",
          "docs": [
            "Token account de l'acheteur (reçoit le yield en receipt tokens)"
          ],
          "writable": true
        },
        {
          "name": "seller_token_account",
          "docs": [
            "Token account du vendeur (reçoit le principal)"
          ],
          "writable": true
        },
        {
          "name": "token_program",
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        }
      ],
      "args": [
        {
          "name": "current_token_value",
          "type": "u64"
        }
      ]
    },
    {
      "name": "settle_meteora_lp_deal",
      "docs": [
        "Settle a Meteora LP deal after it ends",
        "Returns the Position NFT to the seller (permissionless)"
      ],
      "discriminator": [
        195,
        32,
        60,
        155,
        142,
        18,
        234,
        240
      ],
      "accounts": [
        {
          "name": "payer",
          "docs": [
            "Anyone can settle an expired deal (permissionless)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "deal",
          "writable": true
        },
        {
          "name": "nft_vault",
          "docs": [
            "The vault holding the Position NFT"
          ],
          "writable": true
        },
        {
          "name": "seller_nft_account",
          "docs": [
            "Seller's token account to receive the NFT back"
          ],
          "writable": true
        },
        {
          "name": "position_nft_mint",
          "docs": [
            "Position NFT mint (needed for transfer_checked)"
          ]
        },
        {
          "name": "nft_token_program"
        }
      ],
      "args": []
    },
    {
      "name": "update_config",
      "docs": [
        "Update protocol configuration",
        "Only callable by authority"
      ],
      "discriminator": [
        29,
        158,
        252,
        191,
        10,
        83,
        219,
        99
      ],
      "accounts": [
        {
          "name": "config",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "authority",
          "signer": true,
          "relations": [
            "config"
          ]
        }
      ],
      "args": [
        {
          "name": "params",
          "type": {
            "defined": {
              "name": "UpdateConfigParams"
            }
          }
        }
      ]
    }
  ],
  "accounts": [
    {
      "name": "MeteoraLpDeal",
      "discriminator": [
        88,
        16,
        225,
        179,
        189,
        254,
        44,
        170
      ]
    },
    {
      "name": "ProtocolConfig",
      "discriminator": [
        207,
        91,
        250,
        28,
        152,
        179,
        215,
        209
      ]
    },
    {
      "name": "YieldDeal",
      "discriminator": [
        216,
        238,
        159,
        168,
        226,
        65,
        200,
        38
      ]
    }
  ],
  "errors": [
    {
      "code": 6000,
      "name": "ProtocolPaused",
      "msg": "Protocol is paused"
    },
    {
      "code": 6001,
      "name": "InvalidDuration",
      "msg": "Invalid duration (must be 30, 60, or 90 days)"
    },
    {
      "code": 6002,
      "name": "InvalidPrice",
      "msg": "Invalid price"
    },
    {
      "code": 6003,
      "name": "InvalidAmount",
      "msg": "Invalid amount"
    },
    {
      "code": 6004,
      "name": "DealNotAvailable",
      "msg": "Deal is not available for purchase"
    },
    {
      "code": 6005,
      "name": "DealNotActive",
      "msg": "Deal is not active"
    },
    {
      "code": 6006,
      "name": "DealNotEnded",
      "msg": "Deal has not ended yet"
    },
    {
      "code": 6007,
      "name": "DealEnded",
      "msg": "Deal has already ended"
    },
    {
      "code": 6008,
      "name": "DealAlreadyActive",
      "msg": "Deal is already active (has a buyer)"
    },
    {
      "code": 6009,
      "name": "NotSeller",
      "msg": "Only the seller can perform this action"
    },
    {
      "code": 6010,
      "name": "NotBuyer",
      "msg": "Only the buyer can perform this action"
    },
    {
      "code": 6011,
      "name": "InsufficientFunds",
      "msg": "Insufficient funds for buyback"
    },
    {
      "code": 6012,
      "name": "Unauthorized",
      "msg": "Unauthorized"
    },
    {
      "code": 6013,
      "name": "MathOverflow",
      "msg": "Math overflow"
    },
    {
      "code": 6014,
      "name": "InvalidMint",
      "msg": "Receipt token mint is not in the allowed whitelist"
    },
    {
      "code": 6015,
      "name": "WhitelistFull",
      "msg": "Whitelist is full, cannot add more mints"
    },
    {
      "code": 6016,
      "name": "MintAlreadyWhitelisted",
      "msg": "Mint is already in the whitelist"
    },
    {
      "code": 6017,
      "name": "MintNotInWhitelist",
      "msg": "Mint is not in the whitelist"
    },
    {
      "code": 6018,
      "name": "InvalidMeteoraPosition",
      "msg": "Invalid Meteora position"
    },
    {
      "code": 6019,
      "name": "PositionPoolMismatch",
      "msg": "Position does not belong to the expected pool"
    },
    {
      "code": 6020,
      "name": "InvalidPositionNft",
      "msg": "Invalid Position NFT - must be amount 1"
    },
    {
      "code": 6021,
      "name": "NotDealBuyer",
      "msg": "Caller is not the deal buyer"
    }
  ],
  "types": [
    {
      "name": "CreateDealParams",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "receipt_tokens_amount",
            "type": "u64"
          },
          {
            "name": "principal_value_at_lock",
            "type": "u64"
          },
          {
            "name": "expected_yield",
            "type": "u64"
          },
          {
            "name": "selling_price",
            "type": "u64"
          },
          {
            "name": "duration_days",
            "type": "u16"
          },
          {
            "name": "source_protocol",
            "type": {
              "defined": {
                "name": "SourceProtocol"
              }
            }
          }
        ]
      }
    },
    {
      "name": "CreateMeteoraLpDealParams",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "position_account",
            "docs": [
              "Meteora Position account address (for reference)"
            ],
            "type": "pubkey"
          },
          {
            "name": "pool",
            "docs": [
              "Meteora Pool address"
            ],
            "type": "pubkey"
          },
          {
            "name": "fee_a_at_lock",
            "docs": [
              "Current fee_a_pending from the position (snapshot)"
            ],
            "type": "u64"
          },
          {
            "name": "fee_b_at_lock",
            "docs": [
              "Current fee_b_pending from the position (snapshot)"
            ],
            "type": "u64"
          },
          {
            "name": "expected_fee_a",
            "docs": [
              "Estimated Token A fees during deal period"
            ],
            "type": "u64"
          },
          {
            "name": "expected_fee_b",
            "docs": [
              "Estimated Token B fees during deal period"
            ],
            "type": "u64"
          },
          {
            "name": "expected_fee_value_usdc",
            "docs": [
              "Combined estimated value in USDC"
            ],
            "type": "u64"
          },
          {
            "name": "selling_price",
            "docs": [
              "Price asked by seller (in payment token)"
            ],
            "type": "u64"
          },
          {
            "name": "duration_days",
            "docs": [
              "Duration in days (30, 60, 90, 180, 365)"
            ],
            "type": "u16"
          }
        ]
      }
    },
    {
      "name": "DealStatus",
      "type": {
        "kind": "enum",
        "variants": [
          {
            "name": "Created"
          },
          {
            "name": "Active"
          },
          {
            "name": "Settled"
          },
          {
            "name": "Cancelled"
          },
          {
            "name": "BoughtBack"
          }
        ]
      }
    },
    {
      "name": "MeteoraLpDeal",
      "docs": [
        "Meteora DAMM v2 LP Fee Deal",
        "Represents a deal where a LP sells their future fees for a specific period.",
        "The Position NFT is locked in PayFlow vault during the deal."
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "deal_id",
            "docs": [
              "Unique deal ID (auto-incremented)"
            ],
            "type": "u64"
          },
          {
            "name": "bump",
            "docs": [
              "PDA bump seed"
            ],
            "type": "u8"
          },
          {
            "name": "seller",
            "docs": [
              "Seller - original owner of the Position NFT"
            ],
            "type": "pubkey"
          },
          {
            "name": "buyer",
            "docs": [
              "Buyer - purchaser of the fee rights (default if not purchased)"
            ],
            "type": "pubkey"
          },
          {
            "name": "position_nft_mint",
            "docs": [
              "The Position NFT mint (1 NFT = 1 LP position)"
            ],
            "type": "pubkey"
          },
          {
            "name": "position_account",
            "docs": [
              "The Meteora Position account address"
            ],
            "type": "pubkey"
          },
          {
            "name": "position_nft_vault",
            "docs": [
              "PayFlow vault holding the Position NFT"
            ],
            "type": "pubkey"
          },
          {
            "name": "pool",
            "docs": [
              "The Meteora pool address"
            ],
            "type": "pubkey"
          },
          {
            "name": "token_a_mint",
            "docs": [
              "Token A mint of the pool"
            ],
            "type": "pubkey"
          },
          {
            "name": "token_b_mint",
            "docs": [
              "Token B mint of the pool"
            ],
            "type": "pubkey"
          },
          {
            "name": "fee_a_at_lock",
            "docs": [
              "fee_a_pending at deal creation (snapshot)"
            ],
            "type": "u64"
          },
          {
            "name": "fee_b_at_lock",
            "docs": [
              "fee_b_pending at deal creation (snapshot)"
            ],
            "type": "u64"
          },
          {
            "name": "expected_fee_a",
            "docs": [
              "Estimated Token A fees during deal period"
            ],
            "type": "u64"
          },
          {
            "name": "expected_fee_b",
            "docs": [
              "Estimated Token B fees during deal period"
            ],
            "type": "u64"
          },
          {
            "name": "expected_fee_value_usdc",
            "docs": [
              "Combined estimated value in USDC (for reference)"
            ],
            "type": "u64"
          },
          {
            "name": "selling_price",
            "docs": [
              "Price set by seller (in payment_mint tokens)"
            ],
            "type": "u64"
          },
          {
            "name": "payment_mint",
            "docs": [
              "Payment token mint (usually USDC)"
            ],
            "type": "pubkey"
          },
          {
            "name": "duration_days",
            "docs": [
              "Duration in days (30, 60, 90, 180, 365)"
            ],
            "type": "u16"
          },
          {
            "name": "created_at",
            "docs": [
              "Timestamp when deal was created"
            ],
            "type": "i64"
          },
          {
            "name": "purchased_at",
            "docs": [
              "Timestamp when deal was purchased (0 if not yet)"
            ],
            "type": "i64"
          },
          {
            "name": "ends_at",
            "docs": [
              "Timestamp when deal ends (0 if not yet purchased)"
            ],
            "type": "i64"
          },
          {
            "name": "status",
            "docs": [
              "Current deal status"
            ],
            "type": {
              "defined": {
                "name": "DealStatus"
              }
            }
          }
        ]
      }
    },
    {
      "name": "ProtocolConfig",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "authority",
            "type": "pubkey"
          },
          {
            "name": "treasury",
            "type": "pubkey"
          },
          {
            "name": "fee_bps",
            "type": "u16"
          },
          {
            "name": "min_duration_days",
            "type": "u16"
          },
          {
            "name": "max_duration_days",
            "type": "u16"
          },
          {
            "name": "base_penalty_bps",
            "type": "u16"
          },
          {
            "name": "min_penalty_bps",
            "type": "u16"
          },
          {
            "name": "is_paused",
            "type": "bool"
          },
          {
            "name": "deal_counter",
            "type": "u64"
          },
          {
            "name": "bump",
            "type": "u8"
          },
          {
            "name": "allowed_mints",
            "docs": [
              "Whitelist of allowed receipt token mints (kUSDC, mSOL, etc.)"
            ],
            "type": {
              "vec": "pubkey"
            }
          }
        ]
      }
    },
    {
      "name": "SourceProtocol",
      "docs": [
        "Source protocol categories for yield-bearing assets",
        "Phase 1: Lending & Liquid Staking (receipt tokens that appreciate)",
        "Phase 2: LP Positions (coming soon)",
        "Phase 3: Fee Streams (coming soon)"
      ],
      "type": {
        "kind": "enum",
        "variants": [
          {
            "name": "Kamino"
          },
          {
            "name": "MarginFi"
          },
          {
            "name": "Solend"
          },
          {
            "name": "Save"
          },
          {
            "name": "Marinade"
          },
          {
            "name": "Jito"
          },
          {
            "name": "Blaze"
          },
          {
            "name": "Sanctum"
          },
          {
            "name": "Lido"
          },
          {
            "name": "RaydiumLp"
          },
          {
            "name": "MeteoraLp"
          },
          {
            "name": "OrcaLp"
          },
          {
            "name": "FeeStream"
          }
        ]
      }
    },
    {
      "name": "UpdateConfigParams",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "fee_bps",
            "docs": [
              "New fee in basis points (None = no change)"
            ],
            "type": {
              "option": "u16"
            }
          },
          {
            "name": "base_penalty_bps",
            "docs": [
              "New base penalty in basis points (None = no change)"
            ],
            "type": {
              "option": "u16"
            }
          },
          {
            "name": "min_penalty_bps",
            "docs": [
              "New minimum penalty in basis points (None = no change)"
            ],
            "type": {
              "option": "u16"
            }
          },
          {
            "name": "is_paused",
            "docs": [
              "Pause/unpause the protocol (None = no change)"
            ],
            "type": {
              "option": "bool"
            }
          },
          {
            "name": "new_treasury",
            "docs": [
              "New treasury address (None = no change)"
            ],
            "type": {
              "option": "pubkey"
            }
          },
          {
            "name": "new_authority",
            "docs": [
              "New authority address (None = no change)"
            ],
            "type": {
              "option": "pubkey"
            }
          },
          {
            "name": "add_mint",
            "docs": [
              "Mint to add to whitelist (None = no addition)"
            ],
            "type": {
              "option": "pubkey"
            }
          },
          {
            "name": "remove_mint",
            "docs": [
              "Mint to remove from whitelist (None = no removal)"
            ],
            "type": {
              "option": "pubkey"
            }
          }
        ]
      }
    },
    {
      "name": "YieldDeal",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "deal_id",
            "type": "u64"
          },
          {
            "name": "bump",
            "type": "u8"
          },
          {
            "name": "seller",
            "type": "pubkey"
          },
          {
            "name": "buyer",
            "type": "pubkey"
          },
          {
            "name": "receipt_token_mint",
            "type": "pubkey"
          },
          {
            "name": "receipt_token_vault",
            "type": "pubkey"
          },
          {
            "name": "receipt_tokens_amount",
            "type": "u64"
          },
          {
            "name": "principal_value_at_lock",
            "type": "u64"
          },
          {
            "name": "expected_yield",
            "type": "u64"
          },
          {
            "name": "selling_price",
            "type": "u64"
          },
          {
            "name": "payment_mint",
            "type": "pubkey"
          },
          {
            "name": "duration_days",
            "type": "u16"
          },
          {
            "name": "created_at",
            "type": "i64"
          },
          {
            "name": "purchased_at",
            "type": "i64"
          },
          {
            "name": "ends_at",
            "type": "i64"
          },
          {
            "name": "status",
            "type": {
              "defined": {
                "name": "DealStatus"
              }
            }
          },
          {
            "name": "source_protocol",
            "type": {
              "defined": {
                "name": "SourceProtocol"
              }
            }
          }
        ]
      }
    }
  ]
}